### Base URL
@base_url=http://localhost:3000
@token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjFkYmUwNmI1ZDdjMmE3YzA0NDU2MzA2MWZmMGZlYTM3NzQwYjg2YmMiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiQXJpZWxhIE1hcsOnYWwgU3RlZmFuaW5pIiwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0wyVW1XWVdaTF9PR1ViNm5UbWdLbGVyRGE4dWdHU1BkcnczaW9fQnRrTmhRPXM5Ni1jIiwiaXNzIjoiaHR0cHM6Ly9zZWN1cmV0b2tlbi5nb29nbGUuY29tL2ZlZGVyYS1hcGkiLCJhdWQiOiJmZWRlcmEtYXBpIiwiYXV0aF90aW1lIjoxNzE1MTkwODIzLCJ1c2VyX2lkIjoiOWRLalJrTUVzSmhUWmxiazhqcVZ4ZXhGeW16MiIsInN1YiI6IjlkS2pSa01Fc0poVFpsYms4anFWeGV4RnltejIiLCJpYXQiOjE3MjI4OTU0NDksImV4cCI6MTcyMjg5OTA0OSwiZW1haWwiOiJhcmllbGEuc3RlZmFuaW5pQHNvdS51bmlmYWwtbWcuZWR1LmJyIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMDE5ODIzNTg4NDU0MDkwMzU3ODEiXSwiZW1haWwiOlsiYXJpZWxhLnN0ZWZhbmluaUBzb3UudW5pZmFsLW1nLmVkdS5iciJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.sTCuYhZRWn59dJt-X0kU_Mu_LC9vXKbr7YqvuoyRfUJKJOfYI-Zh8rC670fvZ31YYyfl6u0EAC9knqKCPXuuc8Hnd-5QEgfT76WdliRa-2Is0eK27xqs9iyLQ1Nyg53AtnrCqVh_AJRjean_iIKhpnXKdqDPB0sRmLsY_zdYyjEsf8sub9hsc1TtmglD-uiNVpkxebsBeFz79StlOZVFsgf-mdcdzx_syVrfdz8xHMv01K3BvYEbb2QYhLIo8EJI_HRNb4VQoYchiyMNzAjpogT7FGwIwyFN3RRCwiCKUb5SeDQOs6aF5Zp8T-jUCQMNpKaus5lZkA7oCNqR11ZXkw
###
# @name createUser
POST {{base_url}}/users
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "email": "ariela.stefanini@sou.unifal-mg.edu.br",
  "userType": "client",
  "name": "Ariela Stefanini ",
  "church": "IPI Alpinópolis",
  "pastor": "Vitor",
  "ddd": "35",
  "cellphone": "998185335",
  "gender": "male",
  "cep": "37.940-000",
  "cpf": "08850515995",
  "data_nasc":"17/03/1993",
  "idade": 18,
  "responsavel": "Paulo",
  "documento_responsavel": "05904651805",
  "ddd_responsavel": "35",
  "cellphone_responsavel": "999095569",
  "address": "Rua Antonio Divino de Morais",
  "complemento": "",
  "cidade": "Alpinopolis",
  "estado": "MG",
  "alergia": "Não",
  "medicamento":"Não",
  "info_add": "Nao"
}
###

@userId = {{ createUser.response.body.id }}

###
# @name createEvent
POST {{base_url}}/events
Content-Type: application/json
Authorization: Bearer {{token}}

{
      "name": "federa",
      "date": "2024-01-01",
      "location": "betel",
      "eventType": "gender_specific",
      "maxClientMale": "1" ,
      "maxClientFemale": "1",
      "maxStaffMale": "1",
      "maxStaffFemale": "1",
      "maxGeneralSpots": "300",
      "startDate": "2024-08-01T00:00:00Z",
      "endDate": "2024-08-01T23:59:59Z"
}

###

@eventId = {{ createEvent.response.body.id }}

###
# @name makeReservation
POST {{base_url}}/events/{{eventId}}/reserve-spot
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "spots": ["Spot A1"],
  "ticket_kind": "full",
  "email": "ariela.stefanini@sou.unifal-mg.edu.br",
  "userType": "client",
  "gender": "male",
  "userId": "{{userId}}"
}

###

@spotId = {{ makeReservation.response.body.id }}

### Get reservations for a specific user
# @name getReservationByUser
GET {{base_url}}/users/{{userId}}/reservations
Content-Type: application/json
Authorization: Bearer {{token}}

### Get reservations for a specific event
# @name getReservationByEvents
GET {{base_url}}/events/{{eventId}}/reservations
Content-Type: application/json
Authorization: Bearer {{token}}

### Get installments
# @name getInstallments
GET {{base_url}}/events/{{eventId}}/installments
Content-Type: application/json
Authorization: Bearer {{token}}


### Verificar Status de Inscrição para um Evento
# @name time
GET {{base_url}}/events/{{eventId}}/registration-status
Content-Type: application/json
Authorization: Bearer {{token}}



###
# @name getUserById
GET {{base_url}}/users/{{userId}}
Content-Type: application/json
Authorization: Bearer {{token}}

###
# @name updateUser
PATCH  {{base_url}}/users/{{userId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "name": "Updated Name",
    "email": "ariela.stefanini@sou.unifal-mg.edu.br"
}
###
# @name deleteUser
DELETE {{base_url}}/users/{{userId}}
Content-Type: application/json
Authorization: Bearer {{token}}



###
GET {{base_url}}/events
Content-Type: application/json
Authorization: Bearer {{token}}

###
GET {{base_url}}/events/{{eventId}}
Content-Type: application/json
Authorization: Bearer {{token}}

###
PUT {{base_url}}/events/{{eventId}}
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "name": "UPDATE",
    "description": "Federa2024",
    "date": "2024-06-22T00:00:00Z",
    "price": 30000
}

###
DELETE {{base_url}}/events/{{eventId}}
Content-Type: application/json
Authorization: Bearer {{token}}

# ###  
# # @name createSpot
# POST {{base_url}}/events/{{eventId}}/spots
# 

# {
#     "name": "comprando um vag1a",
#     "type": "user_spot"
# }

# ###
# GET {{base_url}}/events/{{eventId}}/spots

# ###

# @spotName = {{ createSpot.response.body.name }}

### Chamada POST para a API payPaymentsPagarme
# @name pagarmeCredit
POST {{base_url}}/payments
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "items": [
    {
      "amount": 2990,
      "description": "federa"
    }
  ],
  "customer": {
    "email": "ariela.stefanini@sou.unifal-mg.edu.br"
  },
  "payments": {
    "payment_method": "credit_card",
    "credit_card": {
      "installments": 1,
      "statement_descriptor": "AVENGERS",
      "card": {
        "number": "4000000000000010",
        "holder_name": "Tony Stark",
        "exp_month": 1,
        "exp_year": 30,
        "cvv": "3531",
        "billing_address": {
          "line_1": "10880, Malibu Point, Malibu Central",
          "zip_code": "90265",
          "city": "Malibu",
            "state": "CA",
            "country": "US"                
        }
      }
    }
  }
}

###
# @name pagarmeBoleto
POST {{base_url}}/payments
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "items": [
    {
      "amount": 2990,
      "description": "federa"
    }
  ],
  "customer": {
    "email": "ariela.stefanini@sou.unifal-mg.edu.br"
  },
  "payments": {
    "payment_method": "boleto",
    "boleto": {
      "due_at": "2024-08-07T00:00:00Z"
    }
  }
}

###
# @name pagarmePix
POST {{base_url}}/payments
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "items": [
    {
      "amount": 2990,
      "description": "federa"
    }
  ],
  "customer": {
    "email": "ariela.stefanini@sou.unifal-mg.edu.br"
  },
  "payments": {
    "payment_method": "pix"
  }
}


###
# @name webehook_test
POST {{base_url}}/payments/webhook-pagarme
Content-Type: application/json

{
  "id": "hook_nVNwZ28uAu3WqLEO",
  "account": {
    "id": "acc_8dnw5PzCoSJWmZrg",
    "name": "PRESBITERIO VALE DO RIO GRANDE - test"
  },
  "type": "charge.paid",
  "created_at": "2024-04-09T16:56:01.8782162Z",
  "data": {
    "id": "ch_9wn2KB8CxC4zxDod",
    "code": "D3NETMAX0D",
    "gateway_id": "807329",
    "amount": 33000,
    "paid_amount": 33000,
    "status": "paid",
    "currency": "BRL",
    "payment_method": "pix",
    "paid_at": "2024-04-09T16:52:18.4976896Z",
    "created_at": "2024-04-09T16:52:18.407Z",
    "updated_at": "2024-04-09T16:52:18.5260834Z",
    "pending_cancellation": false,
    "customer": {
      "id": "cus_qgBk15ztlXSoZkeG",
      "name": "Ariela Stefanini ",
      "email": "ariela.stefanini@sou.unifal-mg.edu.br",
      "document": "08850515995",
      "type": "individual",
      "delinquent": false,
      "address": {
        "id": "addr_8wRq51qs0Un5XgjN",
        "line_1": "Rua Antonio Divino de Morais",
        "street": "Rua Antonio Divino de Morais",
        "zip_code": "37.940000",
        "city": "Alpinopolis",
        "state": "MG",
        "country": "BR",
        "status": "active",
        "created_at": "2024-03-21T22:02:28.957Z",
        "updated_at": "2024-03-21T22:02:28.957Z",
        "metadata": {}
      },
      "created_at": "2024-03-21T22:02:28.943Z",
      "updated_at": "2024-03-21T22:02:28.943Z",
      "phones": {
        "mobile_phone": {
          "country_code": "55",
          "number": "998185335",
          "area_code": "35"
        }
      },
      "metadata": {}
    },
    "order": {
      "id": "or_kDQPldGS2kf7Pmo1",
      "code": "D3NETMAX0D",
      "amount": 33000,
      "closed": true,
      "created_at": "2024-04-09T16:52:18.393Z",
      "updated_at": "2024-04-09T16:52:18.5260834Z",
      "closed_at": "2024-04-09T16:52:18.393Z",
      "currency": "BRL",
      "status": "paid",
      "customer_id": "cus_qgBk15ztlXSoZkeG",
      "metadata": {}
    },
    "last_transaction": {
      "transaction_type": "pix",
      "pix_provider_tid": "807329",
      "qr_code": "https://digital.mundipagg.com/pix/",
      "qr_code_url": "https://api.pagar.me/core/v5/transactions/tran_58pLydT7OS0BJdnO/qrcode?payment_method=pix",
      "end_to_end_id": "E12345678202009091221abcdef12345",
      "payer": {
        "name": "Tony Stark",
        "document": "***951352**",
        "document_type": "CPF",
        "bank_account": {
          "bank_name": "Pagarme Bank",
          "ispb": "35245745"
        }
      },
      "expires_at": "2024-04-09T18:52:18.4066667Z",
      "id": "tran_3kxAdWZefXCNLpQB",
      "gateway_id": "807329",
      "amount": 33000,
      "status": "paid",
      "success": true,
      "created_at": "2024-04-09T16:52:18.5260834Z",
      "updated_at": "2024-04-09T16:52:18.5260834Z",
      "gateway_response": {},
      "antifraud_response": {},
      "metadata": {}
    },
    "metadata": {}
  }
}